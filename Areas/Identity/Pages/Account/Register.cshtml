@page
@model Ryby.Areas.Identity.Pages.Account.RegisterModel
@{
    ViewData["Title"] = "Registrace";
}

<h2>Registrace</h2>

<form method="post" enctype="multipart/form-data">
    <div asp-validation-summary="All" class="text-danger"></div>

    <!-- Hidden input pro název dočasného souboru -->
    <input type="hidden" asp-for="Input.TempImageName" />

    <div class="form-group">
        <label asp-for="Input.FirstName"></label>
        <input asp-for="Input.FirstName" class="form-control" />
        <span asp-validation-for="Input.FirstName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Input.LastName"></label>
        <input asp-for="Input.LastName" class="form-control" />
        <span asp-validation-for="Input.LastName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Input.Phone"></label>
        <input asp-for="Input.Phone" class="form-control" />
        <span asp-validation-for="Input.Phone" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Input.Email"></label>
        <input asp-for="Input.Email" class="form-control" />
        <span asp-validation-for="Input.Email" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Input.Password"></label>
        <input asp-for="Input.Password" class="form-control" />
        <span asp-validation-for="Input.Password" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Input.ConfirmPassword"></label>
        <input asp-for="Input.ConfirmPassword" class="form-control" />
        <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Input.ProfileImage"></label>

        <input asp-for="Input.ProfileImage"
               type="file"
               accept="image/*"
               id="profileImageInput"
               class="form-control" />

        <span asp-validation-for="Input.ProfileImage" class="text-danger"></span>

        <!-- Náhled obrázku -->
        <img id="profileImagePreview"
             src="@(Model?.Input?.TempImageName == null ? "" : "/Temp/" + Model.Input.TempImageName)"
             alt="Náhled obrázku"
             style="max-width: 200px; margin-top: 10px; @(Model?.Input?.TempImageName == null ? "display:none;" : "display:block;")" />
    </div>

    <button type="submit" class="btn btn-primary">Registrovat</button>
</form>

<script>
    document.getElementById("profileImageInput").addEventListener("change", function (event) {
        const file = event.target.files[0];
        const preview = document.getElementById("profileImagePreview");

        if (file) {
            const reader = new FileReader();

            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = "block";
            };

            reader.readAsDataURL(file);
        }
    });
</script>